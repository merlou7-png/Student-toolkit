<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Игра: Угадай ячейку</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; }
        #field td {
            width: 35px;
            height: 35px;
            border: 1px solid #444;
            text-align: center;
            cursor: pointer;
            transition: background 0.2s;
        }
        .hit { background-color: #ff4d4d !important; } 
        .miss { background-color: #bdc3c7; }           
        .target { } 
        #timer { font-size: 1.5rem; margin: 10px; color: #e74c3c; font-weight: bold; }
        #message { font-size: 1.2rem; margin-top: 10px; height: 30px; }
        .win { color: #27ae60; font-weight: bold; }
        .lose { color: #c0392b; font-weight: bold; }
    </style>
</head>
<body>
    <div id="timer">Осталось времени: 60</div>
    <table id="field"></table>
    <div id="message"></div>
    <button onclick="location.reload()" style="margin-top: 15px; padding: 10px 20px; cursor: pointer;">Начать заново</button>
    <script>
        const field = document.querySelector('#field');
        const message = document.querySelector('#message');
        const timerDisplay = document.querySelector('#timer');
        const size = 10;      
        const totalTargets = 10;   
        let foundCount = 0;       
        let timeLeft = 60;       
        let isGameOver = false;
        function createField() {
            for (let i = 0; i < size; i++) {
                let tr = document.createElement('tr');
                for (let j = 0; j < size; j++) {
                    let td = document.createElement('td');
                    td.addEventListener('click', cellClickHandler);
                    tr.appendChild(td);
                }
                field.appendChild(tr);
            }
        }
        function setTargets() {
            let tds = document.querySelectorAll('#field td');
            let placed = 0;
            while (placed < totalTargets) {
                let randomIndex = Math.floor(Math.random() * tds.length);
                if (!tds[randomIndex].classList.contains('target')) {
                    tds[randomIndex].classList.add('target');
                    placed++;
                }
            }
        }
        function cellClickHandler() {
            if (isGameOver || this.classList.contains('hit') || this.classList.contains('miss')) {
                return; 
            }
            if (this.classList.contains('target')) {
                this.classList.add('hit');
                foundCount++;
                if (foundCount === totalTargets) {
                    victory();
                }
            } else {
                this.classList.add('miss');
            }
        }
        let timerId = setInterval(() => {
            timeLeft--;
            timerDisplay.textContent = `Осталось времени: ${timeLeft}`;
            if (timeLeft <= 0) {
                gameOver();
            }
        }, 1000);
        function victory() {
            isGameOver = true;
            clearInterval(timerId);
            message.textContent = 'Поздравляем! Вы нашли все ячейки!';
            message.className = 'win';
        }
        function gameOver() {
            isGameOver = true;
            clearInterval(timerId);
            message.textContent = 'Время вышло! Вы проиграли.';
            message.className = 'lose';
            document.querySelectorAll('.target').forEach(td => {
                if (!td.classList.contains('hit')) {
                    td.style.backgroundColor = '#f39c12';
                }
            });
        }
        createField();
        setTargets();
    </script>
</body>
</html>