<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>JS Algorithms Lab</title>
    <style>
        body { font-family: sans-serif; background: #f4f7f6; padding: 20px; color: #333; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #2c3e50; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; }
        .card { border: 1px solid #ddd; padding: 15px; border-radius: 8px; transition: 0.3s; }
        .card:hover { border-color: #3498db; background: #f0f9ff; }
        input, button, textarea { width: 100%; padding: 8px; margin-top: 10px; border-radius: 4px; border: 1px solid #ccc; box-sizing: border-box; }
        button { background: #3498db; color: white; border: none; cursor: pointer; font-weight: bold; }
        button:hover { background: #2980b9; }
        .result { margin-top: 10px; font-size: 0.9em; font-family: monospace; color: #e67e22; word-break: break-all; }
    </style>
</head>
<body>

<div class="container">
    <h1>18 –ê–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∏—Ö –ó–∞–¥–∞—á</h1>
    <div class="grid" id="main-grid"></div>
</div>

<script>
    const tasks = [
        { id: 1, title: "1. FizzBuzz+", desc: "N: 3‚ÜíFizz, 5‚ÜíBuzz, 7‚ÜíBazz", input: "105", fn: (v) => {
            let res = [];
            for(let i=1; i<=v; i++) {
                let s = "";
                if(i%3===0) s+="Fizz"; if(i%5===0) s+="Buzz"; if(i%7===0) s+="Bazz";
                res.push(s || i);
            }
            return res.join(", ");
        }},
        { id: 2, title: "2. Digital Root", desc: "–°—É–º–º–∞ —Ü–∏—Ñ—Ä –¥–æ 1 —Ü–∏—Ñ—Ä—ã", input: "456", fn: (v) => {
            while(v.length > 1) v = v.split('').reduce((a,b)=>+a + +b, 0).toString();
            return v;
        }},
        { id: 3, title: "3. –í—Ç–æ—Ä–æ–π –º–∞–∫—Å–∏–º—É–º", desc: "–ú–∞—Å—Å–∏–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–±–µ–∑ sort)", input: "10, 40, 30, 40, 20", fn: (v) => {
            let arr = v.split(',').map(Number), max1 = -Infinity, max2 = -Infinity;
            for(let n of arr) {
                if(n > max1) { max2 = max1; max1 = n; }
                else if(n > max2 && n < max1) { max2 = n; }
            }
            return max2;
        }},
        { id: 4, title: "4. –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ (1 —Ä–∞–∑)", desc: "–ú–∞—Å—Å–∏–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é", input: "1,2,2,3,4,4,5", fn: (v) => {
            let arr = v.split(','), counts = {};
            arr.forEach(x => counts[x] = (counts[x]||0) + 1);
            return arr.filter(x => counts[x] === 1).join(', ');
        }},
        { id: 5, title: "5. –ü—Ä–æ—Å—Ç—ã–µ —á–∏—Å–ª–∞ –¥–æ N", desc: "–í–≤–µ–¥–∏—Ç–µ N", input: "20", fn: (v) => {
            let res = [];
            for(let i=2; i<=v; i++) {
                let isP = true;
                for(let j=2; j<=Math.sqrt(i); j++) if(i%j===0) { isP=false; break; }
                if(isP) res.push(i);
            }
            return res.join(', ');
        }},
        { id: 6, title: "6. –ù–û–î / –ù–û–ö", desc: "–î–≤–∞ —á–∏—Å–ª–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é", input: "12, 18", fn: (v) => {
            let [a, b] = v.split(',').map(Number);
            let gcd = (x, y) => y === 0 ? x : gcd(y, x % y);
            let g = gcd(a, b);
            return `–ù–û–î: ${g}, –ù–û–ö: ${(a * b) / g}`;
        }},
        { id: 7, title: "7. –ü–µ—Ä–µ–≤–æ—Ä–æ—Ç —Å–ª–æ–≤", desc: "–§—Ä–∞–∑–∞", input: "—è —É—á—É js", fn: (v) => v.split(' ').reverse().join(' ') },
        { id: 8, title: "8. –°–¥–≤–∏–≥ –º–∞—Å—Å–∏–≤–∞", desc: "–º–∞—Å—Å–∏–≤ | —Å–¥–≤–∏–≥", input: "1,2,3,4 | 2", fn: (v) => {
            let [a, k] = v.split('|');
            let arr = a.split(','), n = +k % arr.length;
            return [...arr.slice(-n), ...arr.slice(0, -n)].join(',');
        }},
        { id: 9, title: "9. Merge –º–∞—Å—Å–∏–≤–æ–≤", desc: "arr1 | arr2 (–æ—Ç—Å–æ—Ä—Ç.)", input: "1,3,5 | 2,4,6", fn: (v) => {
            let [a, b] = v.split('|').map(x => x.split(',').map(Number));
            let res = [], i = 0, j = 0;
            while(i < a.length && j < b.length) res.push(a[i] < b[j] ? a[i++] : b[j++]);
            return [...res, ...a.slice(i), ...b.slice(j)].join(',');
        }},
        { id: 10, title: "10. –ß–∞—Å—Ç–æ—Ç–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å", desc: "–°–ª–æ–≤–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª", input: "apple banana apple", fn: (v) => {
            let dict = {};
            v.split(' ').forEach(w => dict[w] = (dict[w]||0)+1);
            return JSON.stringify(dict);
        }},
        { id: 11, title: "11. –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞", desc: "–¢–µ–∫—Å—Ç —Å –ª–∏—à–Ω–∏–º–∏ –ø—Ä–æ–±–µ–ª–∞–º–∏", input: "–ü—Ä–∏–≤–µ—Ç    –º–∏—Ä  \n  —Ç–µ—Å—Ç", fn: (v) => v.replace(/\s+/g, ' ').trim() },
        { id: 12, title: "12. Email –≤–∞–ª–∏–¥–∞—Ç–æ—Ä", desc: "–í–≤–µ–¥–∏—Ç–µ email", input: "test@mail.ru", fn: (v) => {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(v) ? "‚úÖ –û–∫" : "‚ùå –û—à–∏–±–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ";
        }},
        { id: 13, title: "13. –¢–µ–ª–µ—Ñ–æ–Ω KZ", desc: "–õ—é–±—ã–µ 10-11 —Ü–∏—Ñ—Ä", input: "87071234567", fn: (v) => {
            let d = v.replace(/\D/g, '').slice(-10);
            return `+7 (${d.slice(0,3)}) ${d.slice(3,6)}-${d.slice(6,8)}-${d.slice(8,10)}`;
        }},
        { id: 14, title: "14. –°—á—ë—Ç—á–∏–∫ —Å–º–∞–π–ª–æ–≤", desc: "–¢–µ–∫—Å—Ç —Å–æ —Å–º–∞–π–ª–∞–º–∏ üòä", input: "–ü—Ä–∏–≤–µ—Ç üòä —Ç–µ—Å—Ç üò° üòä", fn: (v) => {
            let matches = v.match(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu) || [];
            let count = {};
            matches.forEach(s => count[s] = (count[s]||0)+1);
            return JSON.stringify(count);
        }},
        { id: 15, title: "15. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª–∏–Ω—ã", desc: "–¢–µ–∫—Å—Ç", input: "–ü—Ä–∏–≤–µ—Ç. –ö–∞–∫ –¥–µ–ª–∞?", fn: (v) => {
            return `–°–∏–º–≤: ${v.length}, –°–ª–æ–≤: ${v.split(/\s+/).length}, –ü—Ä–µ–¥–ª: ${v.split(/[.!?]+/).filter(Boolean).length}`;
        }},
        { id: 16, title: "16. –ü–æ–∏—Å–∫ —Ö—ç—à—Ç–µ–≥–æ–≤", desc: "–¢–µ–∫—Å—Ç —Å #—Ç–µ–≥–∞–º–∏", input: "#js #code #js", fn: (v) => {
            let tags = v.match(/#[a-z–∞-—è0-9]+/gi) || [];
            return [...new Set(tags)].join(', ');
        }},
        { id: 17, title: "17. Camel ‚Üî Snake", desc: "camelCase –∏–ª–∏ snake_case", input: "my_variable_name", fn: (v) => {
            if(v.includes('_')) return v.replace(/_([a-z])/g, g => g[1].toUpperCase());
            return v.replace(/[A-Z]/g, g => `_${g.toLowerCase()}`);
        }},
        { id: 18, title: "18. –¢—Ä–∞–Ω—Å–ª–∏—Ç RU‚ÜíLAT", desc: "–†—É—Å—Å–∫–∏–π —Ç–µ–∫—Å—Ç", input: "–ü—Ä–∏–≤–µ—Ç", fn: (v) => {
            const map = { '–∞':'a','–±':'b','–≤':'v','–≥':'g','–¥':'d','–µ':'e','—ë':'yo','–∂':'zh','–∑':'z','–∏':'i','–π':'y','–∫':'k','–ª':'l','–º':'m','–Ω':'n','–æ':'o','–ø':'p','—Ä':'r','—Å':'s','—Ç':'t','—É':'u','—Ñ':'f','—Ö':'h','—Ü':'ts','—á':'ch','—à':'sh','—â':'sch','—ä':'','—ã':'y','—å':'','—ç':'e','—é':'yu','—è':'ya' };
            return v.toLowerCase().split('').map(char => map[char] || char).join('');
        }}
    ];

    const grid = document.getElementById('main-grid');
    tasks.forEach(t => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
            <strong>${t.title}</strong>
            <p style="font-size:0.8em; color:gray">${t.desc}</p>
            <input type="text" id="in-${t.id}" value="${t.input}">
            <button onclick="runTask(${t.id})">–í—ã–ø–æ–ª–Ω–∏—Ç—å</button>
            <div class="result" id="res-${t.id}"></div>
        `;
        grid.appendChild(card);
    });

    function runTask(id) {
        const task = tasks.find(t => t.id === id);
        const val = document.getElementById(`in-${id}`).value;
        const resDiv = document.getElementById(`res-${id}`);
        try {
            resDiv.innerText = "–†–µ–∑—É–ª—å—Ç–∞—Ç: " + task.fn(val);
        } catch(e) {
            resDiv.innerText = "–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞";
        }
    }
</script>

</body>
</html>